<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee LCA Expert</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app-container">
    <header class="top-bar">
        <h2 id="ui_title">â˜• Kaffee LCA Expert</h2>
        <div class="lang-switch">
            <button class="lang-btn active" onclick="game.setLang('de')">DE</button>
            <button class="lang-btn" onclick="game.setLang('en')">EN</button>
        </div>
    </header>
    
    <div id="progress" class="progress-bar">Phase 1/5</div>

    <section id="phase1" class="phase-container">
        <h1 id="ui_p1_title" class="main-heading">System wÃ¤hlen</h1>
        <div class="selection-grid">
            <div class="card select-card" onclick="game.start(2, 'Instant')">
                <i data-lucide="coffee" size="48"></i>
                <h3 id="ui_type_instant">Instant</h3>
                <p id="ui_desc_instant">...</p>
            </div>
            <div class="card select-card" onclick="game.start(2, 'Filter')">
                <i data-lucide="filter" size="48"></i>
                <h3 id="ui_type_filter">Filter</h3>
                <p id="ui_desc_filter">...</p>
            </div>
            <div class="card select-card" onclick="game.start(2, 'Kapsel')">
                <i data-lucide="disc" size="48"></i>
                <h3 id="ui_type_kapsel">Kapsel</h3>
                <p id="ui_desc_kapsel">...</p>
            </div>
        </div>
    </section>

    <section id="phase2" class="phase-container hidden">
        <div class="split-layout">
            <div class="game-area">
                <p id="ui_p2_instr" class="instr-text">...</p>
                <div id="sourceContainer" class="source-box"></div>
                
                <div class="drop-grid">
                    <div class="drop-zone zone-mat" id="zone_Material" data-target="Material"><h4 id="ui_zone_mat">Material</h4></div>
                    <div class="drop-zone zone-prod" id="zone_Herstellung" data-target="Herstellung"><h4 id="ui_zone_prod">Prod</h4></div>
                    <div class="drop-zone zone-use" id="zone_Nutzung" data-target="Nutzung"><h4 id="ui_zone_use">Use</h4></div>
                    <div class="drop-zone zone-eol" id="zone_EoL" data-target="EoL"><h4 id="ui_zone_eol">EoL</h4></div>
                </div>
                <div id="sortFeedback" class="feedback-msg"></div>
            </div>
            
            <aside class="sidebar">
                <h4><i data-lucide="book-open" size="18"></i> <span id="ui_lexikon">Lexikon</span></h4>
                <div id="lexikonShort" class="scroll-content"></div>
            </aside>
        </div>
        <div class="action-bar">
            <button class="btn primary" id="btnCheckSort" onclick="game.checkSort()">Check</button>
            <button class="btn ghost" id="btnSkip" onclick="game.nextStep(3)">Skip</button>
        </div>
    </section>

    <section id="phase3" class="phase-container hidden">
        <h2 id="ui_p3_title" class="main-heading">...</h2>
        <div class="score-display">
            <span id="ui_p3_instr">...</span> 
            <strong id="sumDisplay">0 / 100</strong>
        </div>
        <div id="sliderBox" class="slider-container"></div>
        <button class="btn primary full-width" id="btnFinishGuess" disabled onclick="game.nextStep(4)">Result</button>
    </section>

    <section id="phase4" class="phase-container hidden">
        <div class="split-layout">
            <div class="chart-area">
                <h3 id="ui_p4_title">...</h3>
                <canvas id="resChart"></canvas>
                <div class="details-box">
                    <h4 id="ui_details">Details:</h4>
                    <div id="longDescBox" class="scroll-content small"></div>
                </div>
            </div>
            <div class="stats-area">
                <div class="impact-card">
                    <span class="label">COâ‚‚-Footprint</span>
                    <h2 id="absVal">0.00</h2>
                    <span class="unit">kg COâ‚‚e</span>
                </div>
                <div id="eolBox" class="eol-card"></div>
                <button class="btn primary full-width" id="btnSim" onclick="game.nextStep(5)">Sim</button>
            </div>
        </div>
    </section>

    <section id="phase5" class="phase-container hidden">
        <div class="split-layout">
            <div class="controls-area">
                <h3 id="ui_p5_title">...</h3>
                
                <div class="control-group">
                    <label><i data-lucide="zap" size="16"></i> <span id="ui_elec">Strom</span></label>
                    <select id="elecMix" onchange="game.updateSim()">
                        <option value="1.0" id="opt_eu">ðŸ‡ªðŸ‡º EU</option>
                        <option value="1.4" id="opt_de">ðŸ‡©ðŸ‡ª DE</option>
                        <option value="0.2" id="opt_fr">ðŸ‡«ðŸ‡· FR</option>
                        <option value="0.1" id="opt_no">ðŸ‡³ðŸ‡´ NO</option>
                    </select>
                </div>

                <div class="control-group">
                    <label id="ui_measures">MaÃŸnahmen:</label>
                    <div id="measuresBox" class="tags-grid"></div>
                </div>
            </div>

            <div class="sim-result-area">
                <canvas id="simChart" height="250"></canvas>
                <p id="savingText" class="saving-highlight"></p>
                
                <div id="certificateWrapper"></div>

                <button class="btn ghost full-width" id="btnRestart" onclick="location.reload()">Restart</button>
            </div>
        </div>
    </section>
</div>

<script type="module" src="src/main.js"></script>
</body>
</html>
